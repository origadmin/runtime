syntax = "proto3";

// Package name remains unchanged
package bootstrap_sample;

// ----------------------------------------------------------------
// Import standard configuration modules (Building Blocks) provided by the framework
// ----------------------------------------------------------------
import "runtime/app/v1/app.proto";
import "runtime/broker/v1/broker.proto";
import "runtime/data/v1/data.proto";
import "runtime/discovery/v1/discovery.proto";
import "runtime/logger/v1/logger.proto";
import "runtime/middleware/v1/middleware.proto";
import "runtime/security/v1/security.proto";
import "runtime/trace/v1/trace.proto";
import "runtime/transport/v1/transport.proto";

// Go package option remains unchanged
option go_package = "github.com/origadmin/runtime/examples/configs/bootstrap_sample;conf";

// Bootstrap is the root configuration example for the entire application.
// The new structure aggregates all configuration items into logical groups, making it clearer and easier to understand.
message Bootstrap {
  // App contains application-level metadata (e.g., name, version, environment).
  runtime.app.v1.App app = 1;

  // Servers holds configurations for all network servers (HTTP, gRPC, WebSocket).
  // This now uses the Servers collection from the transport module.
  runtime.transport.v1.Servers servers = 2;

  // Data holds configurations for all data sources (databases, caches).
  runtime.data.v1.Data data = 3;

  // Logger configures the application's logging behavior.
  runtime.logger.v1.Logger logger = 4;

  // Trace configures the distributed tracing system.
  runtime.trace.v1.Trace trace = 5;

  // Discovery configures the service discovery client.
  runtime.discovery.v1.Discovery discovery = 6;

  // Broker configures the message brokers.
  runtime.broker.v1.Brokers broker = 7;

  // Middlewares defines the middleware chain.
  runtime.middleware.v1.Middlewares middlewares = 8;

  // Security defines authentication and authorization policies.
  runtime.security.v1.Security security = 9;

  // Clients holds configurations for all network clients (HTTP, gRPC).
  // This now uses the Clients collection from the transport module.
  runtime.transport.v1.Clients clients = 10;
}

// The nested Servers message is no longer needed as we use repeated runtime.transport.v1.Server directly.
// message Servers {
//   runtime.server.v1.Server http = 1;
//   runtime.server.v1.Server grpc = 2;
// }
