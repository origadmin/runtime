syntax = "proto3";

package runtime.data.v1;

import "gnostic/openapi/v3/annotations.proto";
import "google/protobuf/struct.proto";
import "runtime/data/cache/v1/cache.proto";
import "runtime/data/database/v1/database.proto";
import "runtime/data/database/v1/document.proto";
import "runtime/data/file/v1/file_store.proto";
import "validate/validate.proto";

option cc_enable_arenas = true;
option go_package = "github.com/origadmin/runtime/api/gen/go/runtime/data/v1;datav1";
option java_multiple_files = true;
option java_outer_classname = "DataV1Proto";
option java_package = "com.github.origadmin.api.runtime.data.v1";
option objc_class_prefix = "ORDV1";

// Data is the top-level configuration for all data-related components.
message Data {
  // FileStore configurations.
  optional FileStores filestores = 1 [
    json_name = "filestores",
    (gnostic.openapi.v3.property) = {description: "FileStore configurations"}
  ];

  // Cache configurations.
  optional Caches caches = 2 [
    json_name = "caches",
    (gnostic.openapi.v3.property) = {description: "Cache configurations"}
  ];

  // Relational Database configurations (SQL).
  optional Databases databases = 3 [
    json_name = "databases",
    (gnostic.openapi.v3.property) = {description: "Relational Database configurations (SQL)"}
  ];

  // Document Database configurations (e.g., MongoDB).
  optional Documents documents = 4 [
    json_name = "documents",
    (gnostic.openapi.v3.property) = {description: "Document Database configurations (e.g., MongoDB)"}
  ];

  // Optional custom configuration for Data components not explicitly defined.
  optional google.protobuf.Struct customize = 100 [
    json_name = "customize",
    (gnostic.openapi.v3.property) = {description: "Custom configuration for Data components not explicitly defined."}
  ];
}

// FileStores is a collection of named FileStore configurations.
message FileStores {
  // Default filestore name.
  optional string default = 1 [
    json_name = "default",
    (gnostic.openapi.v3.property) = {description: "Default filestore name"}
  ];
  // Active filestore name, overrides default.
  optional string active = 2 [
    json_name = "active",
    (gnostic.openapi.v3.property) = {description: "Active filestore name, overrides default"}
  ];
  // List of named FileStore configurations.
  repeated runtime.data.file.v1.FileStoreConfig configs = 3 [
    json_name = "configs",
    (gnostic.openapi.v3.property) = {description: "List of named FileStore configurations"}
  ];
}

// Caches is a collection of named Cache configurations.
message Caches {
  // Default cache name.
  optional string default = 1 [
    json_name = "default",
    (gnostic.openapi.v3.property) = {description: "Default cache name"}
  ];
  // Active cache name, overrides default.
  optional string active = 2 [
    json_name = "active",
    (gnostic.openapi.v3.property) = {description: "Active cache name, overrides default"}
  ];
  // List of named Cache configurations.
  repeated runtime.data.cache.v1.CacheConfig configs = 3 [
    json_name = "configs",
    (gnostic.openapi.v3.property) = {description: "List of named Cache configurations"}
  ];
}

// Databases is a collection of named Relational Database configurations.
message Databases {
  // Default database name.
  optional string default = 1 [
    json_name = "default",
    (gnostic.openapi.v3.property) = {description: "Default database name"}
  ];
  // Active database name, overrides default.
  optional string active = 2 [
    json_name = "active",
    (gnostic.openapi.v3.property) = {description: "Active database name, overrides default"}
  ];
  // List of named Relational Database configurations.
  repeated runtime.data.database.v1.DatabaseConfig configs = 3 [
    json_name = "configs",
    (gnostic.openapi.v3.property) = {description: "List of named Relational Database configurations"}
  ];
}

// Documents is a collection of named Document Database configurations.
message Documents {
  // Default document database name.
  optional string default = 1 [
    json_name = "default",
    (gnostic.openapi.v3.property) = {description: "Default document database name"}
  ];
  // Active document database name, overrides default.
  optional string active = 2 [
    json_name = "active",
    (gnostic.openapi.v3.property) = {description: "Active document database name, overrides default"}
  ];
  // List of named Document Database configurations.
  repeated runtime.data.database.v1.DocumentConfig configs = 3 [
    json_name = "configs",
    (gnostic.openapi.v3.property) = {description: "List of named Document Database configurations"}
  ];
}
